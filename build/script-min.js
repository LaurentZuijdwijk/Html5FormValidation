/**
Html5 form validator. Copyright 2012 Laurent Zuijdwijk
For code examples or support go to https://github.com/LaurentZuijdwijk/Html5FormValidation

**/


var HTML5Form,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var e in b)__hasProp.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};
HTML5Form=function(){function a(){}var b=function(a){this.textFormField=a;this.blur=__bind(this.blur,this);this.focus=__bind(this.focus,this);this.textFormField.$element.bind("blur",this.blur);this.textFormField.$element.bind("focus",this.focus);this.textFormField.element.value=this.textFormField.$element.attr("placeholder");this.textFormField.$element.addClass("placeholder")};b.prototype.focus=function(){if(this.textFormField.$element.val()===this.textFormField.$element.attr("placeholder"))return this.textFormField.element.value=
"",this.textFormField.$element.removeClass("placeholder")};b.prototype.blur=function(){if(""===this.textFormField.$element.val())return this.textFormField.element.value=this.textFormField.$element.attr("placeholder"),this.textFormField.$element.addClass("placeholder")};a.FormPlaceholderDecorator=b;b=function(a){this.element=a;this.$element=$(this.element);this.$element.attr("autofocus")&&this.$element.focus()};b.prototype.required=!1;b.prototype.validate=function(){var a;(a=this._validate())||this.$element.addClass("invalid");
return a};b.prototype._validate=function(){return!0};a.FormField=b;var c=function(b){this.element=b;this.blur=__bind(this.blur,this);this.focus=__bind(this.focus,this);c.__super__.constructor.call(this,this.element);this.$element.bind("focus",this.focus);this.$element.bind("blur",this.blur);this.$element.attr("placeholder")&&new a.FormPlaceholderDecorator(this)};__extends(c,a.FormField);c.prototype.pattern=null;c.prototype.focus=function(){return this.$element.removeClass("invalid")};c.prototype.blur=
function(){if(!this._validate())return this.$element.addClass("invalid")};c.prototype._validate=function(){var a;this.$element.attr("pattern")&&(this.pattern=RegExp(this.$element.attr("pattern")));this.val=this.$element.val();a=!0;this.pattern&&0<this.val.length&&-1===this.val.search(this.pattern)?a=!1:this.$element.attr("required")&&0===this.val.length&&(a=!1);return a};a.TextFormField=c;var e=function(){return e.__super__.constructor.apply(this,arguments)};__extends(e,a.TextFormField);e.prototype.pattern=
/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/i;a.EmailFormField=e;var f=function(){return f.__super__.constructor.apply(this,arguments)};__extends(f,a.TextFormField);f.prototype.pattern=/^([0-9\(\)\/]*)$/i;a.TelFormField=f;var i=function(){return i.__super__.constructor.apply(this,arguments)};__extends(i,a.TextFormField);a.UrlFormField=i;var d=function(a){this.element=a;this.blur=__bind(this.blur,this);this.focus=__bind(this.focus,this);d.__super__.constructor.call(this,this.element);this.$element.bind("focus",
this.focus);this.$element.bind("blur",this.blur)};__extends(d,a.FormField);d.prototype.focus=function(){return this.$element.removeClass("invalid")};d.prototype.blur=function(){if(!this._validate())return this.$element.addClass("invalid")};d.prototype._validate=function(){this.val=this.$element.val();return this.$element.attr("required")&&0===this.val.length?!1:!0};a.SelectFormField=d;var g=function(b){var c,e,d;this.element=b;g.__super__.constructor.call(this,this.element);this.name=this.$element.attr("name");
d=a.CheckboxFormField.names;c=0;for(e=d.length;c<e;c++)if(b=d[c],this.name===b)return{validate:function(){return!0}};a.CheckboxFormField.names.push(this.$element.attr("name"));console.log(this.name)};__extends(g,a.FormField);g.names=[];g.prototype.validate=function(){return 0<$("form input[name="+this.name+"]:checked").length?!0:!1};a.CheckboxFormField=g;var h=function(){return h.__super__.constructor.apply(this,arguments)};__extends(h,a.TextFormField);a.TextAreaFormField=h;return a}.call(this);
$.fn.html5FormValidator=function(){var a;new HTML5Form;a=function(a){console.log(a.tagName);if("SELECT"===a.tagName.toUpperCase())return new HTML5Form.SelectFormField(a);if("TEXTAREA"===a.tagName.toUpperCase())return new HTML5Form.TextAreaFormField(a);switch($(a).attr("type")){case "email":return new HTML5Form.EmailFormField(a);case "tel":return new HTML5Form.TelFormField(a);case "url":return new HTML5Form.UrlFormField(a);case "checkbox":return new HTML5Form.CheckboxFormField(a);default:return new HTML5Form.TextFormField(a)}};
return this.each(function(){var b,c,e,f,i,d,g,h,j;f=$(this);e=[];c=[];f.find("textarea, select, input:not(:submit,:button,:image)").each(function(){return e.push(a(this))});b=function(){var a,b,d,f;c=[];f=[];b=0;for(d=e.length;b<d;b++)a=e[b],a.validate()?f.push(void 0):f.push(c.push(a));return f};h=f.find("input:submit, input:image, input:button");j=[];d=0;for(g=h.length;d<g;d++)i=h[d],j.push($(i).click(function(a){c=b();return c.length?(a.preventDefault(),f.trigger("error",c),!1):!0}));return j})};
$().ready(function(){return $("form").html5FormValidator()});